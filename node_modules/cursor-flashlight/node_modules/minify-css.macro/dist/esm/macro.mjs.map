{"version":3,"file":"macro.mjs","sources":["../../src/macro.ts"],"sourcesContent":["import generate from '@babel/generator'\nimport {createMacro} from 'babel-plugin-macros'\nimport type {Node} from '@babel/core'\n\nexport default createMacro(function evaluateMacros({references}) {\n  references.default.forEach((referencePath) => {\n    if ('quasi' in referencePath.parentPath.node) {\n      const result = referencePath.parentPath.node.quasi.expressions.reduce<\n        Record<string, string>\n      >((p, node: Node) => {\n        if (!node.loc) return p\n        p[`${node.loc.start.line}:${node.loc.start.column}`] = `\\${${\n          generate(node).code\n        }}`\n        return p\n      }, {})\n\n      referencePath.parentPath.node.quasi.quasis.forEach((node) => {\n        if (!node.loc) return\n\n        result[\n          `${node.loc.start.line}:${node.loc.start.column}`\n        ] = node.value.raw\n          .replace(/\\s{2,}|\\n|\\t/g, ' ')\n          .replace(/([:;,([{}>~/])\\s+/g, '$1')\n          .replace(/\\s+([;,)\\]{}>~/!])/g, '$1')\n          .replace(/\\/\\*\\s+/, '/*')\n          .replace(/\\s+\\*\\//, '*/')\n      })\n      const keys = Object.keys(result)\n      keys.sort((a, b) => {\n        const [a0, a1] = a.split(':').map((str) => parseInt(str))\n        const [b0, b1] = b.split(':').map((str) => parseInt(str))\n\n        if (a0 === b0) {\n          return a1 - b1\n        }\n\n        return a0 - b0\n      })\n      referencePath.parentPath.replaceWithSourceString(\n        `\\`${keys\n          .map((k) => result[k])\n          .join('')\n          .trim()}\\``\n      )\n    }\n  })\n}) as (literals: TemplateStringsArray, ...placeholders: any[]) => string\n"],"names":["p","node","loc","start","line","column","generate","code","str","parseInt","a","b","a0","a1","split","map","b0","b1","referencePath","parentPath","result","quasi","expressions","reduce","quasis","forEach","value","raw","replace","keys","Object","sort","replaceWithSourceString","k","join","trim","createMacro","references","default"],"mappings":"AASQ,WAACA,EAAGC,UACCA,EAAKC,KACVF,EAAKC,EAAKC,IAAIC,MAAMC,SAAQH,EAAKC,IAAIC,MAAME,aACzCC,EAASL,GAAMM,SAEVP,GAJeA,EAqBY,WAACQ,UAAQC,SAASD,GAClB,WAACA,UAAQC,SAASD,GAF5C,WAACE,EAAGC,OACLC,EAAIC,GAAMH,EAAEI,MAAM,KAAKC,QACvBC,EAAIC,GAAMN,EAAEG,MAAM,KAAKC,cAE1BH,IAAOI,EACFH,EAAKI,EAGPL,EAAKI,EAjCS,WAACE,MACtB,UAAWA,EAAcC,WAAWlB,KAAM,KACtCmB,EAASF,EAAcC,WAAWlB,KAAKoB,MAAMC,YAAYC,SAQ5D,IAEHL,EAAcC,WAAWlB,KAAKoB,MAAMG,OAAOC,QAASxB,IAC7CA,EAAKC,MAEVkB,EACKnB,EAAKC,IAAIC,MAAMC,SAAQH,EAAKC,IAAIC,MAAME,QACvCJ,EAAKyB,MAAMC,IACZC,QAAQ,gBAAiB,KACzBA,QAAQ,qBAAsB,MAC9BA,QAAQ,sBAAuB,MAC/BA,QAAQ,UAAW,MACnBA,QAAQ,UAAW,aAElBC,EAAOC,OAAOD,KAAKT,GACzBS,EAAKE,QAULb,EAAcC,WAAWa,4BAClBH,EACFd,IAAKkB,GAAMb,EAAOa,IAClBC,KAAK,IACLC,+FAxCX,MAAeC,GAAY,gBAAwBC,WAACA,KAClDA,EAAWC,QAAQb"}